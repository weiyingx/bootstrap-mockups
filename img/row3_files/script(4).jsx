var MSCom=MSCom||{};MSCom.CMS=MSCom.CMS||{};MSCom.CMS.LocalePickerLinkControl={CookieName:"mslocale",CookieExpirationDays:45,toggleLocaleFlyout:function(n){$(".mscom-locale-flyout").is(":visible")?(Mscom.Helper.BiTrack(n,null,5,10),$(".pagebody").show(),$(".mscom-locale-flyout").hide()):(Mscom.Helper.BiTrack(n,null,5,9),$(".pagebody").hide(),$(".mscom-locale-flyout").show());$("html").animate({scrollTop:0},"200")},SetCookie:function(n){var f=MSCom.CMS.LocalePickerLinkControl.CookieName,h=MSCom.CMS.LocalePickerLinkControl.CookieExpirationDays,u={},t="",e,i,o,r,s;document.cookie.length>0&&document.cookie.indexOf(f+"=")!=-1&&(t=document.cookie.substr(document.cookie.indexOf(f+"=")+f.length+1),t.indexOf(";")>0&&(t=t.substring(0,t.indexOf(";"))),t=t.replace(/\|/g,","),t=t.replace(/'/g,'"'),typeof JSON!="undefined"&&(u=JSON.parse(t)));u.u=n;e=new Date;e.setDate(e.getDate()+h);typeof JSON!="undefined"?i=JSON.stringify(u):t.length==0?i='{"u":"'+u.u+'"}':t.indexOf('"u":')==-1?(o='{"u":"'+u.u+'",',i=t.replace("{",o)):(o='"u":"'+u.u+'"',r=t.substr(t.indexOf('"u":')),r=r.indexOf(",")!=-1?r.substring(0,r.indexOf(",")):r.substring(0,r.length-1),i=t.replace(r,o));i=i.replace(/"/g,"'");i=i.replace(/,/g,"|");s=f+"="+i+";expires="+e.toUTCString()+";path=/";document.cookie=s},bindLocaleLinks:function(n){var t=$(".mscom-locale-flyout a");t.bind("click",function(t){var i,r,u;t.preventDefault();i=$(this).attr("bi:locale");n(i);r="/"+Mscom.ContentLocale+"/";u=location.pathname.contains(r)?location.pathname.replace(r,"/"+i+"/"):"/"+i+location.pathname;document.location.href=u+window.location.search})},localePickerhandler:function(n){var r,i,t;if(typeof this.fragmentloaded=="undefined"){r=this;this.fragmentloaded=!1;i=$(".mscom-locale-flyout .mscom-ajax-contentinclude").attr("id");t=MSCom.CMS.Mashup.ContentIncludes["_"+i]=new MSCom.CMS.Mashup.ContentInclude2($("#"+i));t.handler=this;t.Control=n.delegateTarget;var u=this.bindLocaleLinks,f=this.toggleLocaleFlyout,e=this.SetCookie;t.render(function(){u(e);f(n.delegateTarget);r.fragmentloaded=!0})}else if(this.fragmentloaded===!0)this.toggleLocaleFlyout(n.delegateTarget);else return;n.preventDefault()}};$(function(){$(".pagebody").length>0&&$(".mscom-locale-flyout .mscom-ajax-contentinclude").length>0&&$(".mscom-footer-localepicker a").bind("click",function(n){MSCom.CMS.LocalePickerLinkControl.localePickerhandler(n)})})